(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0de2d5"],{8513:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"esf bigbox"},[a("el-breadcrumb",{staticClass:"navsbox",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("客户管理")]),a("el-breadcrumb-item",[t._v("我的预约")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.tableHeaderColor,data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"phone_number",label:"预约人手机号",width:"180"}}),a("el-table-column",{attrs:{prop:"pleasetime",label:"预约时间",width:"180"}}),a("el-table-column",{attrs:{prop:"type",label:"房源类型"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"seetype",label:"是否回访"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"switchs",attrs:{"active-text":"已回访","inactive-text":"未回访"},on:{change:function(a){return t.status(e.$index,t.tableData)}},model:{value:t.radio4[e.$index],callback:function(a){t.$set(t.radio4,e.$index,a)},expression:"radio4[scope.$index]"}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.handleEdit(e.$index,e.row)}}},[t._v("备注\n        ")])]}}])})],1),a("el-pagination",{attrs:{small:"",layout:"prev, pager, next","current-page":t.currentPage,total:t.count},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":function(e){return t.changnum(t.currentPage)}}}),a("el-dialog",{attrs:{visible:t.dialogFormVisible,"show-close":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:"备注","label-width":t.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){return t.removeremark()}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addremark()}}},[t._v("确 定")])],1)],1)],1)},o=[],n={name:"lookhousOk",data:function(){return{currentPage:1,count:null,tableData:[],remark:null,dialogFormVisible:!1,formLabelWidth:"120px",rowid:null,radio4:[]}},methods:{removeremark:function(){this.remark="",this.dialogFormVisible=!1},handleEdit:function(t,e){this.dialogFormVisible=!0,this.rowid=e.id},addremark:function(t,e){var a=this;this.dialogFormVisible=!1,this.$axios.post("entrustsee/updateType.action",{id:this.rowid,remark:this.remark,seetype:""}).then(function(t){a.getlistok(1),a.remark=""})},handleDelete:function(t,e){console.log(t,e)},tableHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"height: 50px!important;overflow: hidden; line-height: 28px;  border-bottom: 1px solid #ebeef5;background-color: #f5f7fa"},status:function(t,e){0!=e[t].seetype&&2!=e[t].seetype||(e[t].seetype=2),1!=e[t].seetype&&1!=e[t].seetype||(e[t].seetype=1),this.$axios.post("entrustsee/updateType.action",{id:e[t].id,seetype:e[t].seetype,remark:""}).then(function(t){})},getlistok:function(t){var e=this;this.$axios.post("entrustsee/selectBroker.action",{page:t,limit:10,broker_id:window.sessionStorage.getItem("userId")}).then(function(t){e.count=t.data.data.count,e.tableData=t.data.data.date;for(var a=0;a<t.data.data.date.length;a++)t.data.data.date[a].pleasetime=e.formatData(t.data.data.date[a].pleasetime),1==t.data.data.date[a].type&&(t.data.data.date[a].type="单个房源"),2==t.data.data.date[a].type&&(t.data.data.date[a].type="单个商厦"),1==t.data.data.date[a].seetype&&(t.data.data.date[a].seetype=!1),2==t.data.data.date[a].seetype&&(t.data.data.date[a].seetype=!0),e.radio4.push(t.data.data.date[a].seetype)})},formatData:function(t){var e=new Date(t),a=e.getFullYear(),r=e.getMonth()+1,o=e.getDate();r=r<10?"0"+r:r,o=o<10?"0"+o:o;return a+"-"+r+"-"+o},changnum:function(t){this.getlistok(t)}},mounted:function(){this.getlistok(1)}},i=n,l=a("2877"),s=Object(l["a"])(i,r,o,!1,null,"2a5ec7d6",null);e["default"]=s.exports}}]);