(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d718557"],{2266:function(e,t,a){"use strict";var s=a("2f7c"),i=a.n(s);i.a},"2f7c":function(e,t,a){},"3d78":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bigbox"},[a("el-breadcrumb",{staticClass:"navsbox",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("楼盘管理")]),a("el-breadcrumb-item",[e._v("添加经纪人")])],1),a("div",{staticClass:"boxs"},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"经纪人姓名"}},[a("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),a("el-form-item",{attrs:{label:"登录密码"}},[a("el-input",{model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1),a("el-form-item",{attrs:{label:"经纪人生日"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"经纪人状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuezt,callback:function(t){e.valuezt=t},expression:"valuezt"}},e._l(e.optionmoneyzt,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"小组ID",prop:"wymoney"}},[a("el-cascader",{attrs:{options:e.options2,props:e.props},on:{"active-item-change":e.handleItemChange},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"角色",prop:"wymoney"}},[a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t,s){return a("el-checkbox",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.value))])}),1)],1),a("el-form-item",{attrs:{label:"经纪人头像"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:this.$store.state.actionUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.shows,expression:"!shows"}],attrs:{type:"primary"},on:{click:function(t){return e.xgform()}}},[e._v("修改")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("提交")])],1)},i=[],o=(a("7f7f"),{name:"addAgentlist",data:function(){return{checkAll:!1,checkedCities:[],cityOptions:[],cities:[],isIndeterminate:!0,props:{value:"value",children:"cities"},role:null,options2:[],shows:!0,name:"",username:"",password:"",imageUrl:"",phone:"",value1:"",time:[],imgurl:null,valuezt:"",optionmoneyzt:[{value:1,label:"在职中"},{value:2,label:"已离职"}]}},methods:{xgform:function(){var e=this;this.$axios.post("BackBroker/updateBroker.action",{id:this.$route.query.id,real_name:this.name,user_name:this.username,password:this.password,phonemunber:this.phone,birthday:this.value1,state:this.valuezt,picture:this.imgurl,group_id:this.time,roleIds:this.role}).then(function(t){0==t.data.code&&(e.$message({message:"修改经纪人成功",type:"success"}),setTimeout(function(){e.$router.push({path:"/Agent/Agentlist"})},1e3))}).catch(function(e){console.log(e)})},get:function(){var e=this;this.$axios.post("BackBroker/getById.action",{id:this.$route.query.id}).then(function(t){e.timeid(),e.name=t.data.data.real_name,e.username=t.data.data.user_name,e.password=t.data.data.password,e.phone=t.data.data.phonemunber,e.value1=t.data.data.birthday,e.valuezt=t.data.data.state,e.imgurl=t.data.data.picture;for(var a=[],s=0;s<t.data.data.roles.length;s++)a.push(t.data.data.roles[s].id);var i=[];i.push(t.data.data.shop.id),i.push(t.data.data.group.id),e.handleItemChange(i),e.checkedCities=a,e.time=i,e.imageUrl=t.data.data.picture}).catch(function(e){console.log(e)})},add:function(){var e=this;this.$axios.post("BackBroker/insertBroker.action",{real_name:this.name,user_name:this.username,password:this.password,phonemunber:this.phone,birthday:this.value1,state:this.valuezt,picture:this.imgurl,group_id:this.time,roleIds:this.role}).then(function(t){0==t.data.code&&(e.$message({message:"新加经纪人成功",type:"success"}),setTimeout(function(){e.$router.push({path:"/Agent/Agentlist"})},1e3))}).catch(function(e){console.log(e)})},handleCheckedCitiesChange:function(e){this.role=e},timeid:function(){var e=this;this.$axios.post("backShop/listAll.action",{}).then(function(t){for(var a=0;a<t.data.data.length;a++){var s={};s.label=t.data.data[a].name,s.value=t.data.data[a].id,s.cities=[],e.options2.push(s)}}).catch(function(e){console.log(e)})},getrole:function(){var e=this;this.$axios.post("SystemSettings/listAllRole.action",{}).then(function(t){for(var a=0;a<t.data.data.length;a++){var s={};s.value=t.data.data[a].name,s.id=t.data.data[a].id,e.cityOptions.push(s),e.cities.push(s)}}).catch(function(e){console.log(e)})},handleItemChange:function(e){var t=this;this.$axios.post("BackBroker/getByShopId.action",{ShopId:e[0]}).then(function(a){for(var s=0;s<t.options2.length;s++)if(t.options2[s].value==e[0]){t.options2[s].cities=[];for(var i=0;i<a.data.data.length;i++){var o={};o.label=a.data.data[i].name,o.value=a.data.data[i].id,t.options2[s].cities.push(o)}}}).catch(function(e){console.log(e)})},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw),this.imgurl=t.response.data}},mounted:function(){window.sessionStorage.setItem("pathids",this.$route.fullPath),this.getrole(),void 0==this.$route.query.id&&this.timeid(),void 0!=this.$route.query.id&&(this.shows=!1,this.get())}}),n=o,l=(a("2266"),a("2877")),r=Object(l["a"])(n,s,i,!1,null,"4b2de966",null);t["default"]=r.exports}}]);