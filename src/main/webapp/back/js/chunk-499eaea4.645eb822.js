(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-499eaea4"],{"158f":function(a,e,t){},2844:function(a,e,t){"use strict";t.r(e);var l=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"esf bigbox"},[t("div",{},[t("el-breadcrumb",{staticClass:"navsbox",attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[a._v("首页")]),t("el-breadcrumb-item",[a._v("客户管理")]),t("el-breadcrumb-item",[a._v("客户列表")])],1),t("div",{staticClass:"search-box"},[t("div",{staticClass:"search-boxitem title"},[a._v("\n          搜索\n        ")]),t("div",{staticClass:"search-boxitem"},[t("el-select",{attrs:{placeholder:"客源类型",clearable:""},on:{change:function(e){return a.seachxq(a.valueClass)}},model:{value:a.valueClass,callback:function(e){a.valueClass=e},expression:"valueClass"}},a._l(a.addClassa,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1),t("div",{staticClass:"search-boxitem"},[t("el-input",{attrs:{placeholder:"客户电话姓名",clearable:""},on:{blur:function(e){return a.seachxq(a.seachinputell)}},model:{value:a.seachinputell,callback:function(e){a.seachinputell=e},expression:"seachinputell"}})],1)]),t("span",{staticClass:"add",attrs:{tag:"span"},on:{click:function(e){return a.handlechang("add")}}},[a._v("+添加")]),t("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":a.tableHeaderColor,data:a.tableData}},[t("el-table-column",{attrs:{prop:"id",label:"编号",width:"160"}}),t("el-table-column",{attrs:{prop:"name",label:"姓名",width:"160"}}),t("el-table-column",{attrs:{prop:"address",label:"地址",width:"160"}}),t("el-table-column",{attrs:{prop:"demand_acreage",label:"需求面积",width:"160"}}),t("el-table-column",{attrs:{prop:"demand_money",label:"需求价格",width:"160"}}),t("el-table-column",{attrs:{prop:"time",label:"时间",width:"160"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return a.handleEdit(e.$index,e.row)}}},[a._v("详情")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return a.handlechang(e.$index,e.row,"ele")}}},[a._v("修改")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return a.dele(e.$index,e.row)}}},[a._v("删除")]),t("el-button",{attrs:{size:"mini"},on:{click:function(t){return a.pphome(e.$index,e.row)}}},[a._v("匹配房源")])]}}])})],1)],1),t("el-dialog",{attrs:{visible:a.dialogFormVisible},on:{"update:visible":function(e){a.dialogFormVisible=e}}},[t("el-form",{attrs:{model:a.form}},[t("el-form-item",{attrs:{label:"类型","label-width":a.formLabelWidth}},[t("el-select",{staticClass:"input-box",attrs:{placeholder:"客源类型",clearable:""},on:{change:function(e){return a.seachxq(a.valueClass)}},model:{value:a.form.valueClassa,callback:function(e){a.$set(a.form,"valueClassa",e)},expression:"form.valueClassa"}},a._l(a.addClassa,function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})}),1)],1),t("el-form-item",{attrs:{label:"姓名","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.name,callback:function(e){a.$set(a.form,"name",e)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"电话","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.tell,callback:function(e){a.$set(a.form,"tell",e)},expression:"form.tell"}})],1),t("el-form-item",{attrs:{label:"地址","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.address,callback:function(e){a.$set(a.form,"address",e)},expression:"form.address"}})],1),t("el-form-item",{attrs:{label:"需求租房地址","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.addresss,callback:function(e){a.$set(a.form,"addresss",e)},expression:"form.addresss"}})],1),t("el-form-item",{attrs:{label:"需求面积","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.m,callback:function(e){a.$set(a.form,"m",e)},expression:"form.m"}})],1),t("el-form-item",{attrs:{label:"需求价格","label-width":a.formLabelWidth}},[t("el-input",{staticClass:"input-box",attrs:{autocomplete:"off"},model:{value:a.form.money,callback:function(e){a.$set(a.form,"money",e)},expression:"form.money"}})],1),t("el-form-item",{attrs:{label:"需求楼盘","label-width":a.formLabelWidth}},[t("el-cascader",{attrs:{options:a.options,props:a.props},on:{"active-item-change":a.handleItemChange},model:{value:a.cascaders,callback:function(e){a.cascaders=e},expression:"cascaders"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){return a.addNo()}}},[a._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.adds()}}},[a._v("确 定")])],1)],1),t("el-dialog",{attrs:{visible:a.dialogTableVisibles},on:{"update:visible":function(e){a.dialogTableVisibles=e}}},[t("el-table",{attrs:{data:a.gridData,"header-cell-style":a.tableHeaderColor}},[t("el-table-column",{attrs:{property:"mansion_name",label:"商厦名称",width:"150"}}),t("el-table-column",{attrs:{property:"money",label:"价格",width:"200"}}),t("el-table-column",{attrs:{property:"office_space",label:"面积"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){return a.xqHome(e.$index,e.row)}}},[a._v("详情")])]}}])})],1)],1)],1)},s=[],o=(t("7f7f"),{name:"Customers",data:function(){return{formLabelWidth:"120px",dialogTableVisibles:!1,gridData:[],form:{name:null,tell:null,address:null,valueClass:null,valueClassa:null,demand:null,addresss:null,m:null,money:null},addClass:[{value:" 1",label:"出租客户"},{value:"2",label:"出售客户"},{value:"3",label:"租房客户"},{value:"4",label:"买房客户"},{value:"5",label:"复合型客户"}],addClassa:[{value:1,label:"意向客户"},{value:2,label:"已成交客户"}],dialogFormVisible:!1,currentPage:1,count:null,valueClass:"",seachinputell:"",optionswh:[{value:" 1",label:"我的客源"},{value:"2",label:"本门店客源"},{value:"3",label:"所有客源"}],valuewh:null,valueData:null,tableData:[],classs:null,options:[],props:{value:"value",children:"cities"},cascaders:null}},methods:{xqHome:function(a,e){this.$router.push("/Administrators/housesListsdetails?id="+e.id)},handleItemChange:function(a){var e=this;this.$axios.post("building/listAllByRegionId.action",{regionId:a[0]}).then(function(t){for(var l=0;l<e.options.length;l++)if(e.options[l].value==a[0]){e.options[l].cities=[];for(var s=0;s<t.data.data.length;s++){var o={};o.label=t.data.data[s].mansion_name,o.value=t.data.data[s].id,1==t.data.data[s].status&&(o.disabled=!0),2==t.data.data[s].status&&(o.disabled=!0),e.options[l].cities.push(o)}}}).catch(function(a){console.log(a)})},pphome:function(a,e){var t=this;console.log(e),this.$axios.post("BackHousesNew/selectPaireds.action",{demand_acreage:e.demand_acreage,demand_money:e.demand_money,region_id:0,building_id:0,page:0,limit:10}).then(function(a){t.gridData=[],t.gridData=a.data.data}),this.dialogTableVisibles=!0},changnum:function(a){this.getlist(a)},tableHeaderColor:function(a){a.row,a.column;var e=a.rowIndex;a.columnIndex;if(0===e)return"height: 50px!important;overflow: hidden; line-height: 28px;  border-bottom: 1px solid #ebeef5;background-color: #f5f7fa"},addNo:function(){this.dialogFormVisible=!1,this.form.valueClassa="",this.form.tell="",this.form.name="",this.form.address="",this.form.m="",this.form.money="",this.form.addresss=""},adds:function(a){var e=this,t=[];1==this.classs&&(t.push(this.form.tell),this.$axios.post("user/insert.action",{category:this.form.valueClassa,phone:t,name:this.form.name,address:this.form.address,demand_acreage:this.form.m,demand_money:this.form.money,demand_address:this.form.addresss,broker_id:window.sessionStorage.getItem("userId"),region_id:this.cascaders[0],building_id:this.cascaders[1]}).then(function(a){e.$message({message:a.data.msg,type:"success"}),e.dialogFormVisible=!1,e.form.valueClassa="",e.form.tell="",e.form.name="",e.form.address="",e.form.m="",e.form.money="",e.form.addresss="",e.getlist()}))},handlechang:function(a){this.classs="add"==a?1:2,this.dialogFormVisible=!0},handleEdit:function(a,e){this.$router.push("/Customer/CustomerCont?id="+e.id)},getlist:function(){var a=this;this.$axios("user/listAll.action",{params:{pageSize:10,pageNum:1,filter:"category=".concat(this.valueClass,"&name=").concat(this.seachinputell)}}).then(function(e){a.tableData=[];for(var t=0;t<e.data.data.list.length;t++)1==e.data.data.list[t].category&&(e.data.data.list[t].category="意向客户"),2==e.data.data.list[t].category&&(e.data.data.list[t].category="已成交客户"),e.data.data.list[t].time=a.formatData(e.data.data.list[t].time);a.tableData=e.data.data.list})},formatData:function(a){var e=new Date(a),t=e.getFullYear(),l=e.getMonth()+1,s=e.getDate();l=l<10?"0"+l:l,s=s<10?"0"+s:s;return t+"-"+l+"-"+s},seachxq:function(){this.getlist()},getsels:function(){var a=this;this.$axios.post("region/listRegion.action",{pid:window.sessionStorage.getItem("cityId")}).then(function(e){for(var t=0;t<e.data.data.length;t++){var l={};l.label=e.data.data[t].title,l.value=e.data.data[t].area_id,l.cities=[],a.options.push(l)}})}},mounted:function(){this.getlist(),this.getsels()}}),i=o,n=(t("de06"),t("2877")),r=Object(n["a"])(i,l,s,!1,null,"30686707",null);e["default"]=r.exports},de06:function(a,e,t){"use strict";var l=t("158f"),s=t.n(l);s.a}}]);