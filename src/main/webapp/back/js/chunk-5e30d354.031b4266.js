(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e30d354"],{6414:function(e,t,a){"use strict";var l=a("9cdf"),s=a.n(l);s.a},"7ba8":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bigbox"},[a("el-breadcrumb",{staticClass:"navsbox",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),a("el-breadcrumb-item",[e._v("房源管理")]),a("el-breadcrumb-item",[e._v("所有房源")]),a("el-breadcrumb-item",[e._v("添加房源")])],1),a("div",{staticClass:"formbox"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm flex",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{staticClass:"formlist",attrs:{label:"房源名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"房源面积",prop:"m",rules:[{required:!0,message:"房源面积不能为空"}]}},[a("el-input",{model:{value:e.ruleForm.m,callback:function(t){e.$set(e.ruleForm,"m",t)},expression:"ruleForm.m"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"可容纳工位",prop:"Buildingnum"}},[a("el-input",{model:{value:e.ruleForm.Buildingnum,callback:function(t){e.$set(e.ruleForm,"Buildingnum",t)},expression:"ruleForm.Buildingnum"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"户型描述",prop:"Traffic "}},[a("el-input",{model:{value:e.ruleForm.Traffic,callback:function(t){e.$set(e.ruleForm,"Traffic",t)},expression:"ruleForm.Traffic "}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"商厦名称",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.getss(e.valuess)}},model:{value:e.valuess,callback:function(t){e.valuess=t},expression:"valuess"}},e._l(e.optionmoneyss,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"座栋住户"}},[a("el-cascader",{attrs:{options:e.optionsids,props:e.props},on:{"active-item-change":e.handleItemChange},model:{value:e.cascaders,callback:function(t){e.cascaders=t},expression:"cascaders"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"房源楼层",prop:"wylc"}},[a("el-input",{model:{value:e.ruleForm.lc,callback:function(t){e.$set(e.ruleForm,"lc",t)},expression:"ruleForm.lc"}})],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"房源租金",prop:"wymoney"}},[a("el-input",{staticClass:"seleqws",model:{value:e.ruleForm.wymoney,callback:function(t){e.$set(e.ruleForm,"wymoney",t)},expression:"ruleForm.wymoney"}}),a("el-select",{staticClass:"seleqw",attrs:{placeholder:"请选择"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.optionmoney,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"最短出租",prop:"wyyear"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.values,callback:function(t){e.values=t},expression:"values"}},e._l(e.optionyear,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"勘察经纪人",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuekcjjr,callback:function(t){e.valuekcjjr=t},expression:"valuekcjjr"}},e._l(e.optionmonewhjjr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"维护经纪人",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuewhjjr,callback:function(t){e.valuewhjjr=t},expression:"valuewhjjr"}},e._l(e.optionmonewhjjr,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"选择店铺",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuezdp,callback:function(t){e.valuezdp=t},expression:"valuezdp"}},e._l(e.optionmoneydp,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"装修程度",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuezx,callback:function(t){e.valuezx=t},expression:"valuezx"}},e._l(e.optionmoneyzx,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"房源状态",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuezt,callback:function(t){e.valuezt=t},expression:"valuezt"}},e._l(e.optionmoneyzt,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{staticClass:"formlist",attrs:{label:"是否上架",prop:"wymoney"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.valuesj,callback:function(t){e.valuesj=t},expression:"valuesj"}},e._l(e.optionmoneysj,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"首页展示图"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:this.$store.state.actionUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,limit:e.int,"on-success":e.upsuccessa,"list-type":"null"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),a("span",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("*只能上传一张jpg/png文件")])],1),a("div",{staticClass:"imglist"},e._l(e.pictureslistb,function(e,t){return a("span",[a("img",{attrs:{src:"",alt:""}}),a("img",{attrs:{src:e,alt:""}})])}),0),a("span",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],staticClass:"imgspan"},[a("img",{attrs:{src:e.imgArrlista,alt:""}}),a("span",[e._v("替换前图片")])])],1),a("el-form-item",{attrs:{label:"房源详情图"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:this.$store.state.actionUrl,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"on-success":e.upsuccess,multiple:e.ok}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1),a("div",{staticClass:"imglist"},e._l(e.pictureslista,function(e,t){return a("span",[a("img",{attrs:{src:"",alt:""}}),a("img",{attrs:{src:e,alt:""}})])}),0),a("div",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],staticClass:"imgbox"},e._l(e.pictureslist,function(t,l){return a("span",{staticClass:"imgspan"},[a("i",{staticClass:"el-icon-delete",on:{click:function(a){return e.dele(t.id)}}}),a("img",{attrs:{src:t.picture,alt:""}})])}),0)],1)],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.shows,expression:"!shows"}],attrs:{type:"primary"},on:{click:function(t){return e.updataform()}}},[e._v("提交")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.shows,expression:"shows"}],attrs:{type:"primary"},on:{click:function(t){return e.xgform()}}},[e._v("修改")])],1)],1)},s=[],i=(a("ac6a"),a("7f7f"),a("ef6c")),o={name:"allhousesListsAdd",data:function(){return{required:!0,ok:!0,shows:!0,cascaders:[],valuesj:"",valuezt:"",int:1,valuekcjjr:"",valuewhjjr:"",imgArrlista:null,buildingId:null,fileList:[],valuezdp:"",valuess:"",valuezx:"",values:null,value:null,options:i["regionData"],selectedOptions:[],dialogFormVisible:!1,ruleForm:{lc:"",name:"",map:"",m:"",Buildingnum:"",Traffic:"",Buildingyear:"",wymoney:"",wyyear:"",parkingmoney:"",airmoney:"",introduce:"",periphery:"",seleqws:"1",years:"1"},fd:null,rules:{name:[{required:!0,message:"请输入房源名称",trigger:"blur"}]},formLabelWidth:"120px",optionmoneydp:[],optionsids:[],imgArrlist:[],optionmonewhjjr:[],optionmonekcjjr:[],props:{value:"value",children:"cities"},optionyear:[{value:1,label:"一个月"},{value:2,label:"三个月"},{value:3,label:"半年 "},{value:4,label:"一年"}],optionmoneyzt:[{value:1,label:"已出租"},{value:2,label:"未出租"}],optionmoneysj:[{value:1,label:"已上架"},{value:2,label:"未上架"}],optionmoneyzx:[{value:1,label:"毛坯"},{value:2,label:"简装"},{value:3,label:"精装"},{value:4,label:"豪装"}],optionmoneyss:[],optionmoney:[{value:1,label:"元/月"},{value:2,label:"元/㎡/天"},{value:3,label:"元/年 "},{value:4,label:"元/㎡/月"},{value:5,label:"元/㎡"},{value:6,label:"万元"}],pictureslist:[],pictureslistb:[],pictureslista:[]}},methods:{jjr:function(){var e=this;this.$axios.post("BackBroker/listAll.action",{}).then(function(t){for(var a=0;a<t.data.data.length;a++){var l={};l.label=t.data.data[a].real_name,l.value=t.data.data[a].id,e.optionmonewhjjr.push(l)}}).catch(function(e){})},dele:function(e){var t=this;this.$axios.post("SystemSettings/deleteFile.action",{id:e}).then(function(e){t.gethouses()}).catch(function(e){})},xgform:function(){var e=this;this.$axios.post("BackHousesNew/updateByPrimaryKeySelective.action",{id:this.$route.query.id,building_id:this.buildingId,work_name:this.ruleForm.name,office_space:this.ruleForm.m,location_number:this.ruleForm.Buildingnum,house_type:this.ruleForm.Traffic,money:this.ruleForm.wymoney,money_unit:this.value,rent_time:this.values,fitment:this.valuezx,entering_broker_id:window.sessionStorage.getItem("userId"),solid_broker_id:this.valuekcjjr,maintain_broker_id:this.valuewhjjr,types:this.valuezt,whether:this.valuesj,urls:this.imgArrlist,house_picture:this.imgArrlista,shop_id:this.valuezdp,location:this.ruleForm.lc,door_id:this.cascaders[1]}).then(function(t){0==t.data.code&&(e.$message({message:"修改房源成功",type:"success"}),setTimeout(function(){e.$router.push({path:"/Administrators/housesLists"})},500))}).catch(function(e){})},updataform:function(){var e=this;null==this.imgArrlista?this.$notify.error({title:"错误",message:"请上传首页展示图"}):this.$axios.post("BackHousesNew/insertSelective.action",{building_id:this.buildingId,work_name:this.ruleForm.name,office_space:this.ruleForm.m,location_number:this.ruleForm.Buildingnum,house_type:this.ruleForm.Traffic,money:this.ruleForm.wymoney,money_unit:this.value,rent_time:this.values,fitment:this.valuezx,entering_broker_id:window.sessionStorage.getItem("userId"),solid_broker_id:this.valuekcjjr,maintain_broker_id:this.valuewhjjr,types:this.valuezt,whether:this.valuesj,urls:this.imgArrlist,house_picture:this.imgArrlista,shop_id:this.valuezdp,location:this.ruleForm.lc,door_id:this.cascaders[1]}).then(function(t){0==t.data.code&&(e.$message({message:"房源增加成功",type:"success"}),setTimeout(function(){e.$router.push({path:"/Administrators/housesLists"})},1e3))}).catch(function(e){})},gethouses:function(){var e=this;if(void 0==this.$route.query.id)return!1;this.$axios.post("BackHousesNew/getById.action",{id:this.$route.query.id}).then(function(t){e.buildingId=t.data.data.result.building_id,e.ruleForm.name=t.data.data.result.work_name,e.ruleForm.m=t.data.data.result.office_space,e.ruleForm.Buildingnum=t.data.data.result.location_number,e.ruleForm.Traffic=t.data.data.result.house_type,e.valuess=t.data.data.result.building_id,e.ruleForm.lc=t.data.data.result.location,e.ruleForm.wymoney=t.data.data.result.money,e.value=t.data.data.result.money_unit,e.values=t.data.data.result.rent_time,e.valuekcjjr=t.data.data.result.solid_broker_id,e.valuewhjjr=t.data.data.result.maintain_broker_id,e.valuezdp=t.data.data.result.shop_id,e.value=t.data.data.result.money_unit,e.valuezx=t.data.data.result.fitment,e.valuezt=t.data.data.result.types,e.valuesj=t.data.data.result.whether,e.pictureslist=t.data.data.result.pictures,e.imgArrlista=t.data.data.result.house_picture,e.handleItemChanges(t.data.data.result.building_id);var a=[];a.push(t.data.data.result.plotBuild.id),e.handleItemChange(a),a.push(t.data.data.result.plotDoor.id),e.cascaders=a}).catch(function(e){})},upsuccessa:function(e,t,a){this.imgArrlista=a[0].response.data},upsuccess:function(e,t,a){this.imgArrlist=[];for(var l=0;l<a.length;l++)this.imgArrlist.push(a[l].response.data)},getss:function(e){this.buildingId=e,this.handleItemChanges(e)},getlistAllByCity:function(e){var t=this;this.$axios.post("building/listAllByCityId.action",{cityId:this.$route.query.cityid}).then(function(e){for(var a=0;a<e.data.data.length;a++){var l={};l.label=e.data.data[a].mansion_name,l.value=e.data.data[a].id,l.cities=[],t.optionmoneyss.push(l)}}).catch(function(e){})},getdp:function(){var e=this;this.$axios.post("backShop/listAll.action",{}).then(function(t){for(var a=0;a<t.data.data.length;a++){var l={};l.label=t.data.data[a].name,l.value=t.data.data[a].id,l.cities=[],e.optionmoneydp.push(l)}}).catch(function(e){})},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){},seleqw:function(){},addressChange:function(e){},mapClass:function(e,t,a){this.$axios("http://api.map.baidu.com/geocoder/v2/?",{params:{address:"北京市海淀区上地十街10号",output:"json",ak:"pdte5B83N8xwZnARmKqMZiF7Cu8b15YX"}}).then(function(e){}).catch(function(e){})},onSubmit:function(){},handleItemChange:function(e){var t=this;this.$axios.post("BackHousesNew/getPlotDoorByConditions.action",{BuildId:e[0]}).then(function(a){for(var l=0;l<t.optionsids.length;l++)if(t.optionsids[l].value==e[0]){t.optionsids[l].cities=[];for(var s=0;s<a.data.data.length;s++){var i={};i.label=a.data.data[s].door_num,i.value=a.data.data[s].id,1==a.data.data[s].status&&(i.disabled=!0),2==a.data.data[s].status&&(i.disabled=!0),t.optionsids[l].cities.push(i)}}}).catch(function(e){})},handleItemChanges:function(e){var t=this;""==e?alert("请选择商厦"):this.$axios.post("BackHousesNew/getPlotBuildByConditions.action",{BuildingId:e}).then(function(e){t.optionsids=[];for(var a=0;a<e.data.data.length;a++){var l={};l.label=e.data.data[a].name,l.value=e.data.data[a].id,l.cities=[],t.optionsids.push(l)}}).catch(function(e){})}},mounted:function(){window.sessionStorage.setItem("pathids",this.$route.fullPath),this.getlistAllByCity(),this.getdp(),this.jjr(),this.gethouses(),void 0==this.$route.query.id&&(this.shows=!1)}},r=o,n=(a("6414"),a("2877")),u=Object(n["a"])(r,l,s,!1,null,"fac049c6",null);t["default"]=u.exports},"9cdf":function(e,t,a){},ac6a:function(e,t,a){for(var l=a("cadf"),s=a("0d58"),i=a("2aba"),o=a("7726"),r=a("32e9"),n=a("84f2"),u=a("2b4c"),c=u("iterator"),d=u("toStringTag"),m=n.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=s(p),v=0;v<h.length;v++){var f,b=h[v],y=p[b],g=o[b],w=g&&g.prototype;if(w&&(w[c]||r(w,c,m),w[d]||r(w,d,b),n[b]=m,y))for(f in l)w[f]||i(w,f,l[f],!0)}}}]);