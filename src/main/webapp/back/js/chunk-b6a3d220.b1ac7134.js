(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b6a3d220"],{1947:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"esf bigbox"},[a("div",{},[a("el-breadcrumb",{staticClass:"navsbox",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("系统设置")]),a("el-breadcrumb-item",[t._v("权限设置")])],1),a("span",{staticClass:"add",attrs:{tag:"span"},on:{click:function(e){t.dialogFormVisiblea=!0}}},[t._v("添加+")]),[a("el-table",{staticStyle:{width:"100%"},attrs:{"header-cell-style":t.tableHeaderColor,border:"",data:t.tableData}},[a("el-table-column",{attrs:{label:"编号",prop:"id"}}),a("el-table-column",{attrs:{label:"角色",prop:"name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.setCheckedNodes(e.$index,e.row)}}},[t._v("权限\n            ")]),a("el-button",{attrs:{size:"mini"},on:{click:function(a){return t.dele(e.$index,e.row)}}},[t._v("删除\n            ")])]}}])})],1)]],2),a("el-dialog",{attrs:{visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-tree",{ref:"tree",attrs:{data:t.data2,"show-checkbox":"","check-strictly":t.tree,"default-expand-all":"","node-key":"id","highlight-current":"",props:t.defaultProps}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.getCheckedKeys}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{visible:t.dialogFormVisiblea},on:{"update:visible":function(e){t.dialogFormVisiblea=e}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisiblea=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addname}},[t._v("确 定")])],1)],1)],1)},n=[],l=(a("7f7f"),{name:"powerset",data:function(){return{tree:!0,name:null,dialogFormVisiblea:!1,dialogFormVisible:!1,currentPage:1,radio4:[],tableData:[],search:"",count:null,arrid:[],addrole:null,addrolename:null,data2:[],defaultProps:{children:"children",label:"label"}}},methods:{dele:function(t,e){var a=this;this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("SystemSettings/DeleteRole.action",{id:e.id}).then(function(t){a.$message({message:t.data.msg}),a.get("")})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addname:function(){var t=this;this.$axios.post("SystemSettings/insertRole.action",{name:this.name}).then(function(e){t.$message({message:e.data.msg}),t.dialogFormVisiblea=!1,t.get("")})},getCheckedKeys:function(){var t=this;console.log(this.$refs.tree.getCheckedKeys()),this.$axios.post("SystemSettings/UpdateRole.action",{functionIds:this.$refs.tree.getCheckedKeys(),name:this.name,id:this.addrole}).then(function(e){t.$message({message:e.data.msg}),t.dialogFormVisible=!1,t.get("")})},get:function(){var t=this;this.$axios.post("SystemSettings/pageAllRole.action",{pageSize:10,pageNum:1}).then(function(e){t.tableData=e.data.data.list})},handleEdit:function(t,e){var a=this;this.$axios.post("SystemSettings/listAllFunction.action",{roleId:e.id}).then(function(t){a.data2=[],a.arrid=[];for(var e=0;e<t.data.data.functions.length;e++){var i={};if(i.id=t.data.data.functions[e].id,i.label=t.data.data.functions[e].name,i.children=[],t.data.data.functions[e].children)for(var n=0;n<t.data.data.functions[e].children.length;n++){var l={};if(l.id=t.data.data.functions[e].children[n].id,l.label=t.data.data.functions[e].children[n].name,l.children=[],t.data.data.functions[e].children[n].children)for(var o=0;o<t.data.data.functions[e].children[n].children.length;o++){var d={};if(d.id=t.data.data.functions[e].children[n].children[o].id,d.label=t.data.data.functions[e].children[n].children[o].name,t.data.data.functions[e].children[n].children[o].children){d.children=[];for(var s=0;s<t.data.data.functions[e].children[n].children[o].children.length;s++){var r={};r.id=t.data.data.functions[e].children[n].children[o].children[s].id,r.label=t.data.data.functions[e].children[n].children[o].children[s].name,d.children.push(r)}}l.children.push(d)}i.children.push(l)}a.data2.push(i)}for(var c=0;c<t.data.data.funcRoles.length;c++){var u={};u.id=t.data.data.funcRoles[c].function_id,a.arrid.push(u)}})},setCheckedNodes:function(t,e){var a=this;this.handleEdit(t,e),this.addrole=e.id,this.addrolename=e.name,setTimeout(function(){a.$refs.tree.setCheckedNodes(a.arrid)},1e3),this.dialogFormVisible=!0},handleDelete:function(t,e){console.log(t,e)},tableHeaderColor:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;if(0===e)return"height: 50px!important;overflow: hidden; line-height: 28px;  border-bottom: 1px solid #ebeef5;background-color: #f5f7fa"},changnum:function(t){this.getHomelist(t)}},mounted:function(){this.get("")}}),o=l,d=(a("953e"),a("2877")),s=Object(d["a"])(o,i,n,!1,null,"0926dcad",null);e["default"]=s.exports},"2d8f":function(t,e,a){},"953e":function(t,e,a){"use strict";var i=a("2d8f"),n=a.n(i);n.a}}]);